# üéØ –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞: –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

### –î–û ‚ùå
```typescript
// –†–æ–¥–∏—Ç–µ–ª—å (Masters.tsx) —É–ø—Ä–∞–≤–ª—è–ª –¥–∞–Ω–Ω—ã–º–∏
const [workingDates, setWorkingDates] = useState([]);

<MasterWorkingDatesManager
  workingDates={workingDates}               // –ü–µ—Ä–µ–¥–∞–≤–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ
  onWorkingDatesChange={setWorkingDates}    // –ü–æ–ª—É—á–∞–ª–∏ –æ–±—Ä–∞—Ç–Ω–æ
  masterId={master?.id}
/>
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è–ª–∏—Å—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –ü–û–°–õ–ï ‚úÖ
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–º–∏
<MasterWorkingDatesManager 
  masterId={master?.id!}  // –¢–æ–ª—å–∫–æ ID!
/>
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î

## –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```typescript
// –í–Ω—É—Ç—Ä–∏ MasterWorkingDatesManager
const [workingDates, setWorkingDates] = useState<WorkingDate[]>([]);
```

### 2. –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
```typescript
refetchOnMount: 'always'  // –í—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞
staleTime: 0              // –í—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏
```

### 3. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
```typescript
useEffect(() => {
  if (masterId) refetchWorkingDates();
}, [masterId]);
```

### 4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```typescript
onSuccess: () => refetchWorkingDates()  // –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```
–û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ ‚Üí –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
                  ‚Üì
         GET /api/masters/{id}/working-dates
                  ‚Üì
            –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                  ‚Üì
         –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
```

```
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–Ω—è ‚Üí POST /api/masters/{id}/working-dates
               ‚Üì
        refetchWorkingDates()
               ‚Üì
        GET (—Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ)
               ‚Üì
       –ö–∞–ª–µ–Ω–¥–∞—Ä—å –æ–±–Ω–æ–≤–ª–µ–Ω ‚úÖ
```

```
F5 (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ) ‚Üí –ü–æ—Ç–µ—Ä—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ state (–Ω–æ—Ä–º–∞!)
                ‚Üì
         –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞
                ‚Üì
         –ù–æ–≤–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                ‚Üì
         GET (–¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î)
                ‚Üì
        –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫—Ç—É–∞–ª–µ–Ω ‚úÖ
```

## –ì–∞—Ä–∞–Ω—Ç–∏–∏

‚úÖ **–í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –∫–∞–∂–¥–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞  
‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ F5** - –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞  
‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç–∏–∏** - –Ω–æ–≤–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ = –Ω–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞  
‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏** - –æ–±–µ —á–∏—Ç–∞—é—Ç –∏–∑ –ë–î  

## –õ–æ–≥–∏

```
üöÄ Component mounted          ‚Üí –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
üîÑ Fetching working dates     ‚Üí –ó–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
‚úÖ Fetched working dates      ‚Üí –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
üì• Raw server data received   ‚Üí –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
‚úÖ Server data converted      ‚Üí –î–∞–Ω–Ω—ã–µ —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
‚úÖ Calendar refreshed         ‚Üí –ö–∞–ª–µ–Ω–¥–∞—Ä—å –æ–±–Ω–æ–≤–ª–µ–Ω
```

## –§–∞–π–ª—ã

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- `/src/components/MasterWorkingDatesManager.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `/src/pages/Masters.tsx` - —É–±—Ä–∞–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ workingDates

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `/docs/AUTONOMOUS_CALENDAR_SUMMARY.md` - –ø–æ–ª–Ω–æ–µ —Ä–µ–∑—é–º–µ
- `/docs/AUTONOMOUS_WORKING_DATES_CALENDAR.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –î–∞—Ç–∞
3 –Ω–æ—è–±—Ä—è 2025 –≥.
