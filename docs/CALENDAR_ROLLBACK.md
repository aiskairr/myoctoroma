# –û—Ç–∫–∞—Ç Calendar –∫ –∫–æ–º–º–∏—Ç—É e10dba55

## –î–∞—Ç–∞: 27 –Ω–æ—è–±—Ä—è 2025 –≥.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ

–î–µ—Å–∫—Ç–æ–ø–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Calendar/index.tsx` –æ—Ç–∫–∞—á–µ–Ω –∫ –≤–µ—Ä—Å–∏–∏ –∏–∑ –∫–æ–º–º–∏—Ç–∞ `e10dba55e59ca02f8e4b02d24887dea0d0e8553f`.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –ú–µ—Ö–∞–Ω–∏–∑–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π URL

**–ë—ã–ª–æ (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è):**
```tsx
useEffect(() => {
    const handleUrlChange = () => {
        const newDate = getDateFromUrl();
        console.log('üìÖ URL changed, new date:', newDate.toISOString(), 'current selectedDate:', selectedDate.toISOString());
        if (newDate.getTime() !== selectedDate.getTime()) {
            console.log('üìÖ Setting new selectedDate');
            setSelectedDate(newDate);
        }
    };

    // –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (–Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥)
    const handlePopState = () => {
        console.log('üìÖ popstate event');
        handleUrlChange();
    };

    // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ hashchange
    const handleHashChange = () => {
        console.log('üìÖ hashchange event');
        handleUrlChange();
    };

    window.addEventListener('popstate', handlePopState);
    window.addEventListener('hashchange', handleHashChange);
    
    return () => {
        window.removeEventListener('popstate', handlePopState);
        window.removeEventListener('hashchange', handleHashChange);
    };
}, [selectedDate]);
```

**–°—Ç–∞–ª–æ (–æ—Ç–∫–∞—á–µ–Ω–æ –∫ –∫–æ–º–º–∏—Ç—É e10dba55):**
```tsx
useEffect(() => {
    const handleUrlChange = () => {
        const newDate = getDateFromUrl();
        console.log('üìÖ URL changed, new date:', newDate.toISOString(), 'current selectedDate:', selectedDate.toISOString());
        if (newDate.getTime() !== selectedDate.getTime()) {
            console.log('üìÖ Setting new selectedDate');
            setSelectedDate(newDate);
        }
    };

    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞—Ç—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL
    handleUrlChange();

    // –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (–Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥)
    const handlePopState = () => {
        console.log('üìÖ popstate event');
        handleUrlChange();
    };

    window.addEventListener('popstate', handlePopState);
    
    return () => {
        window.removeEventListener('popstate', handlePopState);
    };
}, []); // ‚Üê –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

// –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π URL (–¥–ª—è —Å–ª—É—á–∞–µ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
useEffect(() => {
    const checkUrlPeriodically = () => {
        const newDate = getDateFromUrl();
        if (newDate.getTime() !== selectedDate.getTime()) {
            console.log('üìÖ Periodic check: URL date changed from', selectedDate.toISOString(), 'to', newDate.toISOString());
            setSelectedDate(newDate);
        }
    };

    const interval = setInterval(checkUrlPeriodically, 500); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 500–º—Å
    
    return () => clearInterval(interval);
}, [selectedDate]);
```

## –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è

| –ê—Å–ø–µ–∫—Ç | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è | –û—Ç–∫–∞—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (e10dba55) |
|--------|--------------|------------------------------|
| **hashchange listener** | ‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç | ‚ùå –£–¥–∞–ª–µ–Ω |
| **–í—ã–∑–æ–≤ handleUrlChange –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏** | ‚ùå –ù–µ—Ç | ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useEffect** | `[selectedDate]` | `[]` (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤) |
| **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å (–∫–∞–∂–¥—ã–µ 500–º—Å) |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ useEffect** | 1 | 2 |

## –ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (–∫–æ—Ç–æ—Ä—É—é –æ—Ç–∫–∞—Ç–∏–ª–∏):
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `hashchange` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ö–µ—à–∞ URL
- useEffect –∑–∞–≤–∏—Å–µ–ª –æ—Ç `selectedDate`, —á—Ç–æ –º–æ–≥–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –ù–µ –±—ã–ª–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ URL

### –í –æ—Ç–∫–∞—á–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (e10dba55):
- –£–±—Ä–∞–Ω `hashchange` listener
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `handleUrlChange()` –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- useEffect —Å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏)
- –î–æ–±–∞–≤–ª–µ–Ω –≤—Ç–æ—Ä–æ–π useEffect —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π URL –∫–∞–∂–¥—ã–µ 500–º—Å
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç–∫–∞—á–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏

1. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (500–º—Å)**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL –±—É–¥—É—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏**: `handleUrlChange()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å URL
3. **–ú–µ–Ω—å—à–µ event listeners**: –¢–æ–ª—å–∫–æ `popstate`, –±–µ–∑ `hashchange`
4. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –û–¥–∏–Ω useEffect –¥–ª—è —Å–æ–±—ã—Ç–∏–π –±—Ä–∞—É–∑–µ—Ä–∞, –¥—Ä—É–≥–æ–π –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

## –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –æ—Ç–∫–∞—á–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏

1. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 500–º—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ–π
2. **–î–≤–∞ useEffect**: –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –¥–≤—É–º—è —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
3. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ hashchange**: –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ö–µ—à–∞ URL –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è Calendar —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:
- ‚úÖ –°–æ–±—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ (`popstate`)
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (500–º—Å)
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚ùå –ë–µ–∑ `hashchange` events

---

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** ‚úÖ  
**–û—à–∏–±–æ–∫:** –ù–µ—Ç  
**–ö–æ–º–º–∏—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:** e10dba55e59ca02f8e4b02d24887dea0d0e8553f  
**–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:** –û—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (`MobileCalendar/index.tsx`)
