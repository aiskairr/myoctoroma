# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–≥–æ –∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

## –î–∞—Ç–∞: 27 –Ω–æ—è–±—Ä—è 2025 –≥.

–ü–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∫ –∫–æ–º–º–∏—Ç—É e10dba55, —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–≤–µ —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏ –∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—é URL.

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/pages/
‚îú‚îÄ‚îÄ Calendar/
‚îÇ   ‚îî‚îÄ‚îÄ index.tsx           # –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è (–æ—Ç–∫–∞—á–µ–Ω–∞ –∫ e10dba55)
‚îî‚îÄ‚îÄ MobileCalendar/
    ‚îî‚îÄ‚îÄ index.tsx           # –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥)
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### üì± –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (`MobileCalendar/index.tsx`)

```tsx
useEffect(() => {
    const handleUrlChange = () => { /* ... */ };

    const handlePopState = () => { /* ... */ };
    const handleHashChange = () => { /* ... */ };

    window.addEventListener('popstate', handlePopState);
    window.addEventListener('hashchange', handleHashChange);
    
    return () => {
        window.removeEventListener('popstate', handlePopState);
        window.removeEventListener('hashchange', handleHashChange);
    };
}, [selectedDate]);
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ `popstate` (–∫–Ω–æ–ø–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥)
- ‚úÖ –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ `hashchange` (–∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–µ—à–∞ –≤ URL)
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `selectedDate` - –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- ‚ùå –ù–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ùå –ù–µ—Ç –≤—ã–∑–æ–≤–∞ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

### üñ•Ô∏è –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è (`Calendar/index.tsx`)

```tsx
// –ü–µ—Ä–≤—ã–π useEffect - —Å–æ–±—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
useEffect(() => {
    const handleUrlChange = () => { /* ... */ };
    
    handleUrlChange(); // ‚Üê –í—ã–∑–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

    const handlePopState = () => { /* ... */ };

    window.addEventListener('popstate', handlePopState);
    
    return () => {
        window.removeEventListener('popstate', handlePopState);
    };
}, []); // ‚Üê –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

// –í—Ç–æ—Ä–æ–π useEffect - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
useEffect(() => {
    const checkUrlPeriodically = () => {
        const newDate = getDateFromUrl();
        if (newDate.getTime() !== selectedDate.getTime()) {
            setSelectedDate(newDate);
        }
    };

    const interval = setInterval(checkUrlPeriodically, 500);
    return () => clearInterval(interval);
}, [selectedDate]);
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ `popstate` (–∫–Ω–æ–ø–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥)
- ‚ùå –ù–ï —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ `hashchange`
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 500–º—Å
- ‚úÖ –í—ã–∑–æ–≤ `handleUrlChange()` –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –î–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö useEffect –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
- ‚úÖ –õ–æ–≤–∏—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL

## –¢–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

| –§—É–Ω–∫—Ü–∏—è | –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è | –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è |
|---------|------------------|-------------------|
| **popstate event** | ‚úÖ | ‚úÖ |
| **hashchange event** | ‚úÖ | ‚ùå |
| **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** | ‚ùå | ‚úÖ (500–º—Å) |
| **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏** | ‚ùå | ‚úÖ |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ useEffect** | 1 | 2 |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | `[selectedDate]` | `[]` –∏ `[selectedDate]` |
| **–õ–æ–≤–∏—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL** | –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –í—ã—à–µ | –ù–∏–∂–µ (–∏–∑-–∑–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫) |

## –ö–æ–≥–¥–∞ –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è –ª—É—á—à–µ?

### –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è (e10dba55) –ª—É—á—à–µ –¥–ª—è:
- ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π URL (—á–µ—Ä–µ–∑ JavaScript)
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –°–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚ùå –ù–æ: –±–æ–ª—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU –∏–∑-–∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—ã–µ 500–º—Å

### –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ª—É—á—à–µ –¥–ª—è:
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏–∏ –±–∞—Ç–∞—Ä–µ–∏ (–Ω–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∏ hash-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚ùå –ù–æ: –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞:
–û—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (e10dba55) —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π, —Ç–∞–∫ –∫–∞–∫:
- –î–µ—Å–∫—Ç–æ–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ

### –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö:
–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ —Ö–æ—Ä–æ—à –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
1. –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ `handleUrlChange()` –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
2. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–µ–≥–∫–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Ä–∞–∑ –≤ 2-3 —Å–µ–∫—É–Ω–¥—ã)
3. –û—Å—Ç–∞–≤–∏—Ç—å `hashchange` –¥–ª—è SPA-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –î–ª—è –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏–π:
```tsx
// –û–±—â–∏–π —Ö—É–∫ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
function useUrlDateSync() {
    const [selectedDate, setSelectedDate] = useState(getDateFromUrl);
    
    // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    // ...
    
    return selectedDate;
}
```

### –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:
```tsx
useEffect(() => {
    // –°–æ–±—ã—Ç–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–µ–∞–∫—Ü–∏–∏
    window.addEventListener('popstate', handleUrlChange);
    window.addEventListener('hashchange', handleUrlChange);
    
    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∫ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ (—Ä–∞–∑ –≤ 2 —Å–µ–∫—É–Ω–¥—ã)
    const interval = setInterval(checkUrl, 2000);
    
    return () => {
        window.removeEventListener('popstate', handleUrlChange);
        window.removeEventListener('hashchange', handleUrlChange);
        clearInterval(interval);
    };
}, []);
```

## –ò—Ç–æ–≥

–û–±–µ –≤–µ—Ä—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏:
- **–î–µ—Å–∫—Ç–æ–ø–Ω–∞—è**: –ù–∞–¥–µ–∂–Ω–∞—è, —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π (e10dba55)
- **–ú–æ–±–∏–ª—å–Ω–∞—è**: –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è, event-driven

–í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–±–µ –≤–µ—Ä—Å–∏–∏ —Ä–∞–±–æ—á–∏–µ  
**–û—à–∏–±–æ–∫:** –ù–µ—Ç  
**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–¥–µ–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:** –î–∞
