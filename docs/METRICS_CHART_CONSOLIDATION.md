# Объединение графиков: Выручка, Расходы, Доход

## Что было сделано ✅

### Было
3 отдельных графика в сетке 2x2:
```
┌─────────────┬─────────────┐
│ Выручка     │ Расходы     │
├─────────────┼─────────────┤
│ Записи      │ Прибыль     │
└─────────────┴─────────────┘
```

### Стало
1 интерактивный график с селектором вместо 3:
```
┌──────────────────────────────────────────┐
│ Выручка / Расходы / Доход (селектор)     │
│                                          │
│  [Выручка] [Расходы] [Доход]            │
│  ↓ динамически переключаемый график     │
└──────────────────────────────────────────┘

┌──────────────────────────────────────────┐
│ Способы оплаты / Банки (селектор)        │
│ ↓ ещё один интерактивный график         │
└──────────────────────────────────────────┘
```

## Технические изменения

### Файл: `src/pages/Dashboard.tsx`

**Что было удалено:**
- ❌ Отдельный график "Доходы" (Income Chart)
- ❌ Отдельный график "Расходы" (Expenses Chart)
- ❌ Отдельный график "Прибыль" (Profit Chart)

**Что было добавлено:**
- ✅ Единый график "Metrics Selector Chart" с селектором
- ✅ Условная логика для отображения разных графиков

**Использованное состояние:**
```typescript
const [selectedMetricChart, setSelectedMetricChart] = useState<'revenue' | 'expenses' | 'income'>('revenue');
```

## Функциональность

### Селектор Выручка / Расходы / Доход

**Выручка (revenue)**
- Тип: Line Chart
- Поле: `totalRevenue`
- Цвет: Синий (#3b82f6)
- Описание: Тренд общей выручки

**Расходы (expenses)**
- Тип: Area Chart
- Поле: `pettyExpenses`
- Цвет: Красный (#ef4444)
- Описание: Тренд мелких расходов

**Доход (income)**
- Тип: Area Chart
- Поле: `totalIncome`
- Цвет: Фиолетовый (#8b5cf6)
- Описание: Тренд чистого дохода

## Преимущества

✨ **Экономия пространства**
- Было 4 графика в 2x2 сетке
- Стало 2 графика (метрики + платежи/банки)
- Сэкономлено 50% пространства на странице

✨ **Лучшая организация**
- Логически связанные метрики объединены
- Пользователь может переключаться между ними
- Фокусирование на нужной метрике

✨ **Консистентность UI**
- Такой же паттерн, как для платежей/банков
- Единообразный дизайн
- Интуитивный пользовательский интерфейс

✨ **Улучшенный Layout**
- Графики полноширинные (full width)
- Больше видимости для каждого графика
- Большая высота графика (400px вместо 300px)

## Build Status

✅ **SUCCESS**
```
✓ 3805 modules transformed
✓ built in 8.05s
✓ 0 errors
✓ Production ready
```

## Структура Dashboard теперь

```
Dashboard Page
├── Metric Cards (4 карточки с трендами)
│   ├── Daily Revenue
│   ├── Daily Expenses
│   ├── Daily Income
│   └── Daily Record Count
│
├── 30-Day Analytics (2 графика)
│   ├── [NEW] Combined Metrics Chart
│   │   └── Selector: Revenue / Expenses / Income
│   │       └── Dynamic chart display
│   │
│   └── Payment Methods / Banks Chart
│       └── Selector: Payment Methods / Banks
│           ├── Cash, Card, Transfer, Gift Certificate
│           └── Optima, M-Bank, M-Business, etc.
│
├── Services Distribution Chart
├── Masters Workload Chart
├── Booking Links Stats
└── Recent Activity
```

## Следующие Шаги (Опционально)

- Может также объединить графики "Распределение услуг" и "Рабочая нагрузка мастеров" с селектором?
- Добавить возможность экспорта графиков?
- Добавить сравнение периодов?

