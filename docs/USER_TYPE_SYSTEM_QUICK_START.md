# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ß—Ç–æ —ç—Ç–æ?

–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin/user) –ø—Ä–∏ –≤—Ö–æ–¥–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?

**–ù–∏–∫–∞–∫!** üéâ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å—Ç–æ –≤–≤–æ–¥–∏—Ç email –∏ –ø–∞—Ä–æ–ª—å
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω admin –∏–ª–∏ user
- –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (logout, refresh —Ç–æ–∫–µ–Ω–∞) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?

### 1Ô∏è‚É£ –í—Ö–æ–¥ (Login)

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: admin@example.com + password
                          ‚Üì
           –ü—Ä–æ–±—É–µ–º POST /admin/login
                          ‚Üì
              ‚úÖ –£—Å–ø–µ—à–Ω–æ (200 OK)
                          ‚Üì
    localStorage.user_type = 'admin'  ‚Üê –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∏–ø!
                          ‚Üì
              –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª
```

–ï—Å–ª–∏ admin login –≤–µ—Ä–Ω—É–ª 401, –ø—Ä–æ–±—É–µ–º user/auth:
```
           –ü—Ä–æ–±—É–µ–º POST /user/auth
                    ‚Üì
            ‚úÖ –£—Å–ø–µ—à–Ω–æ (200 OK)
                    ‚Üì
    localStorage.user_type = 'user'  ‚Üê –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∏–ø!
```

### 2Ô∏è‚É£ –í—ã—Ö–æ–¥ (Logout)

```
         –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–í—ã—Ö–æ–¥"
                    ‚Üì
   –ß–∏—Ç–∞–µ–º: localStorage.user_type ‚Üí 'admin'
                    ‚Üì
       DELETE /admin/logout  ‚Üê –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç!
                    ‚Üì
    –û—á–∏—â–∞–µ–º —Ç–æ–∫–µ–Ω—ã –∏ user_type
```

### 3Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (Refresh)

```
      API –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω—É–ª 401
              ‚Üì
   –ß–∏—Ç–∞–µ–º: localStorage.user_type ‚Üí 'admin'
              ‚Üì
   POST /admin/refresh  ‚Üê –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç!
              ‚Üì
      –ü–æ–ª—É—á–∏–ª–∏ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
              ‚Üì
    –ü–æ–≤—Ç–æ—Ä—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```

## –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ localStorage?

```javascript
localStorage.user_type // 'admin' –∏–ª–∏ 'user'
localStorage.auth_token // JWT access token
localStorage.refresh_token // Refresh token
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```javascript
console.log(localStorage.getItem('user_type')); // 'admin' –∏–ª–∏ 'user'
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞:
```
User type detected: admin
```

–ü—Ä–∏ –≤—ã—Ö–æ–¥–µ:
```
Logging out using admin endpoint: https://.../admin/logout
```

–ü—Ä–∏ refresh:
```
Trying admin refresh endpoint: https://.../admin/refresh
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```typescript
import { useAuth } from '@/contexts/AuthContext';

function MyComponent() {
  const { userType, user } = useAuth();

  return (
    <div>
      {userType === 'admin' && <AdminPanel />}
      {userType === 'user' && <UserPanel />}
    </div>
  );
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```typescript
const { userType } = useAuth();

if (userType === 'admin') {
  // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
}

if (userType === 'user') {
  // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}
```

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q: –ß—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—á–∏—Å—Ç–∏—Ç localStorage?
**A:** –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º refresh —Ç–æ–∫–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–∏–ø –∑–∞–Ω–æ–≤–æ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –µ–≥–æ.

### Q: –ù—É–∂–Ω–æ –ª–∏ –º–Ω–µ —á—Ç–æ-—Ç–æ –º–µ–Ω—è—Ç—å –≤ UI –¥–ª—è –≤—Ö–æ–¥–∞?
**A:** –ù–µ—Ç! –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–π –∂–µ. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø.

### Q: –ú–æ–∂–Ω–æ –ª–∏ –≤–æ–π—Ç–∏ –∫–∞–∫ admin –∏ user –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?
**A:** –ù–µ—Ç. –ú–æ–∂–Ω–æ –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Ç–æ–ª—å–∫–æ –∫–∞–∫ –æ–¥–∏–Ω —Ç–∏–ø –∑–∞ —Ä–∞–∑.

### Q: –ß—Ç–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω–µ—Ç 401 –Ω–∞ –æ–±–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ login?
**A:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å".

### Q: –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ —É–∑–Ω–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å admin, –∞ –Ω–µ user?
**A:** –ü–æ —É—Å–ø–µ—à–Ω–æ–º—É –æ—Ç–≤–µ—Ç—É –æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞. –ï—Å–ª–∏ `/admin/login` –≤–µ—Ä–Ω—É–ª 200, –∑–Ω–∞—á–∏—Ç —ç—Ç–æ admin. –ï—Å–ª–∏ `/user/auth` –≤–µ—Ä–Ω—É–ª 200, –∑–Ω–∞—á–∏—Ç —ç—Ç–æ user.

## –†–µ–∑—é–º–µ

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è logout
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è refresh
‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ Fallback –Ω–∞ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–±–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –µ—Å–ª–∏ —Ç–∏–ø –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ UI!** üöÄ
