# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã—Ö –∑–∞–¥–∞—á –≤ schedule-calendar

## –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ—Å–∫–æ–ª—å–∫—É –æ—Å–Ω–æ–≤–Ω—ã–º –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º —è–≤–ª—è–µ—Ç—Å—è `schedule-calendar` (time-schedule.tsx), –∞ –Ω–µ DailyCalendar, –±—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã—Ö –∑–∞–¥–∞—á.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `/src/pages/Calendar/components/schedule-calendar.tsx`

**–î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
```typescript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const getUserColor = (user: User | undefined | null): string => {
    const color = user?.color?.trim();
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å HEX —Ü–≤–µ—Ç–∞
    if (color && /^#[0-9A-F]{6}$/i.test(color)) {
        return color;
    }
    
    // Fallback —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    const fallbackColors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6'];
    const userId = user?.id || '1';
    const colorIndex = parseInt(userId) - 1;
    
    return fallbackColors[colorIndex] || '#3B82F6';
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞
const getTextColor = (backgroundColor: string): string => {
    const hex = backgroundColor.replace('#', '');
    if (hex.length !== 6) return '#000000';
    
    const r = parseInt(hex.substr(0, 2), 16);
    const g = parseInt(hex.substr(2, 2), 16);
    const b = parseInt(hex.substr(4, 2), 16);
    const brightness = (r * 299 + g * 587 + b * 114) / 1000;
    
    return brightness > 128 ? '#000000' : '#FFFFFF';
};
```

**–ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `user.color` –Ω–∞ `getUserColor(user)`:**
- –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á
- –í –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í —Å–æ–±—ã—Ç–∏—è—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- –í –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∏ —Ñ–æ–Ω–∞—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### 2. `/src/pages/Calendar/components/time-schedule.tsx`

**–£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getOverlapColor`:**
```typescript
const getOverlapColor = useCallback((appointment: Appointment) => {
    const statusColors = {
        'scheduled': '#10B981',    // green - –∑–∞–ø–∏—Å–∞–Ω
        'in_progress': '#3B82F6',  // blue - –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
        'completed': '#F59E0B',    // yellow - –∑–∞–≤–µ—Ä—à–µ–Ω 
        'cancelled': '#EF4444'     // red - –æ—Ç–º–µ–Ω–µ–Ω
    };

    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —Å—Ç–∞—Ç—É—Å –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º fallback
    const normalizedStatus = appointment.status?.trim() || 'scheduled';
    return statusColors[normalizedStatus] || statusColors.scheduled;
}, []);
```

**–î–æ–±–∞–≤–ª–µ–Ω—ã fallback –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ–±—ä–µ–∫—Ç—ã —Å—Ç–∞—Ç—É—Å–æ–≤:**
```typescript
const statusColors = {
    'scheduled': 'bg-green-50 text-green-900',
    'in_progress': 'bg-blue-50 text-blue-900',
    'completed': 'bg-yellow-50 text-yellow-900',
    'cancelled': 'bg-red-50 text-red-900',
    // Fallback –¥–ª—è –ø—É—Å—Ç—ã—Ö/null –∑–Ω–∞—á–µ–Ω–∏–π
    '': 'bg-green-50 text-green-900',
    'null': 'bg-green-50 text-green-900',
    'undefined': 'bg-green-50 text-green-900'
};
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã —Å TypeScript –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é:**
```typescript
// –ë—ã–ª–æ:
statusColors[appointment.status]
statusLabels[appointment.status]

// –°—Ç–∞–ª–æ:
statusColors[appointment.status as keyof typeof statusColors] || statusColors.scheduled
statusLabels[appointment.status as keyof typeof statusLabels] || statusLabels.scheduled
```

## –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ–±–ª–µ–º

### üõ°Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ HEX —Ñ–æ—Ä–º–∞—Ç–∞ —Ü–≤–µ—Ç–∞
- Fallback –Ω–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID

### üé® –ó–∞—â–∏—Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–¥–∞—á:
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ (trim, null check)
- Fallback –Ω–∞ 'scheduled' –¥–ª—è –≤—Å–µ—Ö –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
- TypeScript –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –æ–±—ä–µ–∫—Ç–∞–º

### üéØ –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —è—Ä–∫–æ—Å—Ç–∏ —Ñ–æ–Ω–∞
- –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–≤–µ—Ç–ª–æ–º —Ñ–æ–Ω–µ, –±–µ–ª—ã–π –Ω–∞ —Ç–µ–º–Ω–æ–º

## –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

### –°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á:
- üü¢ **–ó–∞–ø–∏—Å–∞–Ω** (`scheduled`) - –∑–µ–ª–µ–Ω—ã–π (fallback –¥–ª—è –≤—Å–µ—Ö –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö)
- üîµ **–í –ø—Ä–æ—Ü–µ—Å—Å–µ** (`in_progress`) - —Å–∏–Ω–∏–π
- üü° **–ó–∞–≤–µ—Ä—à–µ–Ω** (`completed`) - –∂–µ–ª—Ç—ã–π
- üî¥ **–û—Ç–º–µ–Ω–µ–Ω** (`cancelled`) - –∫—Ä–∞—Å–Ω—ã–π

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (fallback —Ü–≤–µ—Ç–∞):
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1: `#3B82F6` (—Å–∏–Ω–∏–π)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2: `#EF4444` (–∫—Ä–∞—Å–Ω—ã–π)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 3: `#10B981` (–∑–µ–ª–µ–Ω—ã–π)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 4: `#F59E0B` (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 5+: `#8B5CF6` (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í—Å–µ –∑–∞–¥–∞—á–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏–º–µ—é—Ç —Ü–≤–µ—Ç–æ–≤—É—é –∑–∞–ª–∏–≤–∫—É**
‚úÖ **–ù–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ**
‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ null/undefined –∑–Ω–∞—á–µ–Ω–∏–π**
‚úÖ **TypeScript –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è HEX —Ü–≤–µ—Ç–æ–≤**
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç**

## –î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
11 –æ–∫—Ç—è–±—Ä—è 2025 –≥.
