<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Drag and Drop</title>
    <style>
        .task {
            width: 200px;
            height: 50px;
            background-color: #3B82F6;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px;
            cursor: grab;
            user-select: none;
        }
        .task.dragging {
            opacity: 0.5;
        }
        .slot {
            width: 220px;
            height: 60px;
            border: 2px dashed #ccc;
            margin: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
        }
        .slot.drag-over {
            background-color: #e0f2fe;
            border-color: #3B82F6;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç Drag and Drop</h1>
    <div id="log"></div>
    
    <h2>–ó–∞–¥–∞—á–∏ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è:</h2>
    <div class="task" draggable="true" id="task1">–ó–∞–¥–∞—á–∞ 1</div>
    <div class="task" draggable="true" id="task2">–ó–∞–¥–∞—á–∞ 2</div>
    
    <h2>–°–ª–æ—Ç—ã –¥–ª—è —Å–±—Ä–æ—Å–∞:</h2>
    <div class="slot" id="slot1">–°–ª–æ—Ç 1</div>
    <div class="slot" id="slot2">–°–ª–æ—Ç 2</div>
    <div class="slot" id="slot3">–°–ª–æ—Ç 3</div>

    <script>
        const log = document.getElementById('log');
        
        function addLog(message) {
            log.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
            console.log(message);
        }

        // –ó–∞–¥–∞—á–∏
        const tasks = document.querySelectorAll('.task');
        tasks.forEach(task => {
            task.addEventListener('dragstart', (e) => {
                addLog('üî• dragstart –Ω–∞ –∑–∞–¥–∞—á–µ: ' + task.id);
                e.dataTransfer.setData('text/plain', task.id);
                task.classList.add('dragging');
            });
            
            task.addEventListener('dragend', (e) => {
                addLog('üèÅ dragend –Ω–∞ –∑–∞–¥–∞—á–µ: ' + task.id);
                task.classList.remove('dragging');
            });
        });

        // –°–ª–æ—Ç—ã
        const slots = document.querySelectorAll('.slot');
        slots.forEach(slot => {
            slot.addEventListener('dragover', (e) => {
                e.preventDefault();
                addLog('üìç dragover –Ω–∞ —Å–ª–æ—Ç–µ: ' + slot.id);
                slot.classList.add('drag-over');
            });
            
            slot.addEventListener('dragleave', (e) => {
                addLog('üëã dragleave –Ω–∞ —Å–ª–æ—Ç–µ: ' + slot.id);
                slot.classList.remove('drag-over');
            });
            
            slot.addEventListener('drop', (e) => {
                e.preventDefault();
                addLog('üéØ drop –Ω–∞ —Å–ª–æ—Ç–µ: ' + slot.id);
                slot.classList.remove('drag-over');
                
                const taskId = e.dataTransfer.getData('text/plain');
                const task = document.getElementById(taskId);
                
                if (task) {
                    addLog('‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ ' + taskId + ' –≤ —Å–ª–æ—Ç ' + slot.id);
                    slot.innerHTML = task.textContent;
                    task.style.display = 'none';
                    
                    // –ò–º–∏—Ç–∞—Ü–∏—è API –∑–∞–ø—Ä–æ—Å–∞
                    setTimeout(() => {
                        addLog('üöÄ –û—Ç–ø—Ä–∞–≤–∫–∞ PUT /api/tasks/' + taskId + ' —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏');
                        addLog('üì° –û—Ç–≤–µ—Ç: 200 OK');
                    }, 500);
                }
            });
        });

        addLog('‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    </script>
</body>
</html>
